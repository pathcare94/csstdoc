// New table
const newTableHeader = ['Diabetes', 'Hypertension', 'H/O TB', 'Blood Thinners', 'H/O Heart Disease', 'Asthama', 'Allergy'];

// Calculate the width of each column in mm
const columnWidth = 60; // fixed column width
const padding = 2; // 2mm padding on each side
const newColumnWidths = new Array(3).fill(columnWidth + 2 * padding);

// Draw new table
function drawNewTable() {
    doc.setFont('helvetica', 'bold');
    for (let i = 0; i < newTableHeader.length; i++) {
        let yPos = lineHeight - 6;
        let xPos = 12;
        drawCell(xPos, yPos, newColumnWidths[0], 10);
        doc.setFontSize(12); // Use the same font size as the rest of the document
        doc.text(newTableHeader[i], xPos + 2, lineHeight + 2);
        xPos += newColumnWidths[0];

        drawCell(xPos, yPos, newColumnWidths[1], 10);
        // Check if the condition is met
        if (data.chckPasthistoryofPatient.includes(newTableHeader[i])) {
            doc.text('X', xPos + newColumnWidths[1] / 2, lineHeight + 2, { align: "center" });
        }
        xPos += newColumnWidths[1];

        const additionalData = i < 2 ? [data.diabetes, data.bloodPressure][i] : "";
        drawCell(xPos, yPos, newColumnWidths[2], 10);
        // Wrap text if it doesn't fit in the cell
        const cellText = doc.splitTextToSize(additionalData, newColumnWidths[2] - 4);
        doc.setFontSize(12); // Use the same font size as the rest of the document
        doc.text(cellText, xPos + 2, lineHeight + 2);

        lineHeight += 10;
    }
    doc.setFont('helvetica', 'normal');
}

drawNewTable();
